if (self.CavalryLogger) { CavalryLogger.start_js(["J\/MDb"]); }

__d("CINameToImporterMap",[],(function a(b,c,d,e,f,g){f.exports={msft:1,yahoo:3,gmail:2,yahoo_jp:22,mailru:30,other:19};}),null);
__d("CIBase",[],(function a(b,c,d,e,f,g){function h(i,j){Object.assign(this,{ci_config:i,element_ids:j});return this;}Object.assign(h.prototype,{getElementID:function i(j){return this.element_ids[j];},setElementID:function i(j,k){this.element_ids[j]=k;return this;},setAjaxMode:function i(j){this.ajax_mode=j;return this;},getConfigData:function i(){return {type:this.ci_config.type,flow:this.ci_config.flow,domain_id:this.ci_config.domain_id,import_id:this.ci_config.import_id,tracked_params:this.ci_config.tracked_params,use_case:this.ci_config.use_case,csrf:this.ci_config.csrf};}});f.exports=h;}),null);
__d('CIConstants',[],(function a(b,c,d,e,f,g){var h={importEP:'/contact_importer/ajax/importer.php',addFriendsEP:'/contact_importer/ajax/importer_addfriends.php',inviteEP:'/contact_importer/ajax/importer_invite.php'};f.exports=h;}),null);
__d('CIModularController',['Animation','CSS','DOM','UserAgent_DEPRECATED','$','ge'],(function a(b,c,d,e,f,g){function h(){}Object.assign(h.prototype,{init:function i(j,k,l,m){h.instance=this;this.items=j;this.animate=k;this.noSteplist=m;for(var n in j)if(j[n].expanded){this.expanded=n;break;}if(!l)return;this.iconItems=l;for(var o in l)if(l[o].selected){this.selected=o;break;}},handleClick:function i(j,k,l){if(this.items[j].expanded)return false;if(this.animate){var m=new (c('Animation'))(this.getContentElement(j)).from('height',0).to('height','auto').duration(150).show();c('UserAgent_DEPRECATED').ie()!=9&&m.blind();l&&m.ondone(l);m.go();if(this.expanded){m=new (c('Animation'))(this.getContentElement(this.expanded)).to('height',0).duration(150).hide();c('UserAgent_DEPRECATED').ie()!=9&&m.blind();m.go();}}else{c('CSS').show(this.getContentElement(j));if(this.expanded)c('CSS').hide(this.getContentElement(this.expanded));l&&l();}c('CSS').toggleClass(c('$')(j),'expanded');if(this.expanded){c('CSS').toggleClass(c('$')(this.expanded),'expanded');this.items[this.expanded].expanded=false;}if(!this.noSteplist){var n=c('ge')('ci_steplist_3');if(n)if(this.items[j].invitable){c('CSS').show(n);}else c('CSS').hide(n);}this.items[j].expanded=true;this.expanded=j;if(!k)return;c('CSS').toggleClass(c('$')(k),'selected');if(this.selected){c('CSS').toggleClass(c('$')(this.selected),'selected');this.iconItems[this.selected].selected=false;}this.iconItems[k].selected=true;this.selected=k;},getContentElement:function i(j){return c('DOM').find(c('$')(j),'.ci_module_content');},getFileUploadItemId:function i(){for(var j in this.items)if(this.items[j].key=='other_tools')return j;return null;},showHiddenIfNeeded:function i(j){if(this.items[j].hidden){var k=c('ge')('ci_modules_hidden');if(k){c('CSS').show(k);c('CSS').hide(c('$')('ci_modules_pager'));}}},hasFileUpload:function i(){return this.getFileUploadItemId()?true:false;},selectFileUpload:function i(){var j=this.getFileUploadItemId();if(j){this.showHiddenIfNeeded(j);this.handleClick(j,null,function(){var k=c('ge')('ci_fileupload');k&&c('CSS').show(k);k=c('$')(j);k.scrollIntoView(false);});}},selectNextItem:function i(){var j=null,k=null,l=null;for(var m in this.items){if(!j)j=m;if(k){l=m;break;}if(this.items[m].expanded)k=m;}var n=l||j;this.showHiddenIfNeeded(n);this.handleClick(n);}});f.exports=h;}),null);
__d('CIProgressBarDialog',['AsyncRequest','AsyncResponse','ProgressBar','bind','Dialog'],(function a(b,c,d,e,f,g){function h(){Object.assign(this,{dialog:null,progressBar:null,pollCounter:0,title:null,body:null,startTime:null,endpoint:null,importer:null,startedPoll:false});}h.MAX_POLLS=15;Object.assign(h.prototype,{startTimer:function i(){this.startTime=Date.now();},show:function i(){this.startTimer();var j=new (c('AsyncRequest'))(this.endpoint).setHandler(c('bind')(this,this.handleAsyncResponse));this.dialog=new (c('Dialog'))().setModal(true).showLoading().setAsync(j).setCancelHandler(c('bind')(this,this.handleCancelResponse)).show();return this;},hide:function i(){if(this.dialog){this.dialog.hide();this.dialog=null;}},handleAsyncResponse:function i(j){if(!this.startedPoll){var k=j.getPayload();if(k&&k.body){this.startedPoll=true;setTimeout(function(){this.progressBar=new (c('ProgressBar'))(this.dialog.getRoot());this.poll();}.bind(this),0);this.pollCounter=0;}}},poll:function i(){if(this.pollCounter>=h.MAX_POLLS){this.hide();return;}new (c('AsyncRequest'))().setURI(this.endpoint).setHandler(c('bind')(this,this.handlePollResponse)).setErrorHandler(c('bind')(this,this.handleErrorResponse)).setReadOnly(true).send();this.pollCounter+=1;},handlePollResponse:function i(j){var k=j.getPayload().progress;if(!k||!this.progressBar||!this.dialog)return;this.setProgress(k);if(k.state!=2&&k.percent!=100)setTimeout(this.poll.bind(this),3000);},handleErrorResponse:function i(j){if(!this.dialog)return;this.hide();c('AsyncResponse').defaultErrorHandler(j);},handleCancelResponse:function i(){if(this.importer){this.importer.logAsync({login_str:this.importer.getLoginString(),time_ms:Date.now()-this.startTime,cancel_progress_bar:this.progressBar.state||0});this.importer.async.abandon();this.importer.async=null;}this.hide();},setEndpoint:function i(j){this.endpoint=j;return this;},setImporter:function i(j){this.importer=j;return this;},setProgress:function i(j){if(!this.progressBar)return;this.progressBar.setTarget(j.percent,2000);this.progressBar.changeLabel(j.message);return this;},setPercent:function i(j,k){this.progressBar&&this.progressBar.setTarget(j,k||0);return this;},setEnableCrossTransition:function i(j){this.dialog.setAllowCrossPageTransition(true).setAllowCrossQuicklingNavigation(true);return this;}});f.exports=h;}),null);
__d('CIInputController',['Arbiter','AsyncRequest','AsyncResponse','AsyncSignal','CIBase','CIConstants','CIModularController','CIProgressBarDialog','CSS','DOM','Form','URI','UserAgent_DEPRECATED','Vector','bind','ge'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('CIBase'));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this,k,l);i.setAjaxMode.call(this,n);this.enableProgressBar=o||false;return this;}j.prototype.onSubmit=function(k){'use strict';if(this.disabled)return false;if(!this.getLoginString()){this.showEmailMissingError();return false;}else this.hideEmailMissingError();return this._submitLoginForm(k);};j.prototype.hideProgressDialog=function(){'use strict';this.progress_dialog&&this.progress_dialog.hide();};j.prototype.showEmailMissingError=function(){'use strict';var k=c('DOM').find(this.getFormElement(),'.ci_error_row');c('CSS').show(k);c('CSS').addClass(this.getLoginElement(),'email_missing_error');};j.prototype.hideEmailMissingError=function(){'use strict';var k=c('DOM').find(this.getFormElement(),'.ci_error_row');c('CSS').hide(k);c('CSS').removeClass(this.getLoginElement(),'email_missing_error');};j.prototype.startProgressBar=function(){'use strict';var k={};if(this.ci_config.use_case)k.use_case=this.ci_config.use_case;k.flow=this.ci_config.flow;var l=new (c('URI'))(this.ci_config.progress_endpoint);l.addQueryData(k);this.progress_dialog=new (c('CIProgressBarDialog'))().setEndpoint(l).setImporter(this).show();};j.prototype.enableUserInput=function(){'use strict';this.disabled=false;var k=c('ge')('upload_iframe');if(k)c('CSS').show(k);};j.prototype._submitLoginForm=function(k){'use strict';var l=this.getFormElement(),m=(l.getAttributeNode('action')||{}).value,n=this.getSerializedForm();if(this.ci_config.use_case)n.use_case=this.ci_config.use_case;n.csrf=this.ci_config.csrf;n.ext_sessions=j.getDetectedSessionsStr();if(k)Object.assign(n,k);if(k&&k.full_post||!this.ajax_mode){setTimeout(function(){c('Form').post(this.ci_config.full_endpoint,n);}.bind(this),0);return false;}var o=new (c('AsyncRequest'))();m=c('CIConstants').importEP;n.has_file_upload=c('CIModularController').instance&&c('CIModularController').instance.hasFileUpload()?1:0;this.disabled=true;o.setURI(m).setData(n).setHandler(c('bind')(this,function(p){this.handleLoginSubmit(p.getPayload());this.enableUserInput();})).setErrorHandler(c('bind')(this,function(p){this.enableUserInput();this.progress_dialog&&this.progress_dialog.hide();c('AsyncResponse').defaultErrorHandler(p);})).setStatusElement(this.getStatusElement());if(this.enableProgressBar)this.startProgressBar();j.instance=this;o.send();if(this.ci_config.should_log_tti)window.ciSubmitTime=Date.now();this.async=o;return false;};j.prototype.getSerializedForm=function(){'use strict';var k=this.getFormElement(),l=c('Form').serialize(k),m=this.getLoginElement();if(m)l[m.name]=this.getLoginString();return l;};j.prototype.handleLoginSubmit=function(k){'use strict';this.disabled=false;if(k&&k.progress&&this.progress_dialog){var l=k.progress;this.progress_dialog.setProgress(l);}if(k&&k.content){var m=this.getContainerElement();c('DOM').replace(m,k.content);}if(k&&k.skipnuxstep){if(this.progress_dialog)this.progress_dialog.setPercent(100,0).setEnableCrossTransition(true);c('Arbiter').inform('contact_importer/no_contacts');return;}this.progress_dialog&&this.progress_dialog.hide();};j.prototype.submitChallengeDialog=function(k){'use strict';var l=c('DOM').find(k.getContentNode(),'form'),m=k.getFormData(),n=(l.getAttributeNode('action')||{}).value;m.ext_sessions=j.getDetectedSessionsStr();var o=new (c('AsyncRequest'))().setOption('jsonp',true).setMethod('GET').setReadOnly(true).setURI(n).setData(m).setHandler(c('bind')(this,function(p){this.handleLoginSubmit(p.getPayload());})).setErrorHandler(c('bind')(this,function(p){this.progress_dialog.hide();c('AsyncResponse').defaultErrorHandler(p);})).setStatusElement(this.getFormElement());o.addStatusIndicator();this.startProgressBar();o.send();};j.prototype.tryFileUpload=function(){'use strict';c('CIModularController').instance.selectFileUpload();};j.prototype.tryAnotherImporter=function(){'use strict';c('CIModularController').instance.selectNextItem();};j.prototype.getLoginString=function(){'use strict';return this.getLoginElement()?this.getLoginElement().value.trim():'';};j.prototype.openAPIPopup=function(k,l,m){'use strict';var n=this.getConfigData();Object.assign(n,{api_instance:k,login_str:l});if(m)n.api_ver=m;n.ext_sessions=j.getDetectedSessionsStr();var o=new (c('URI'))(this.ci_config.api_endpoint).addQueryData(n),p=0,q=0;if(k==1){p=600;q=500;}else if(k==2){p=600;q=450;}else if(k==3){p=500;q=500;}else if(k==22){p=1000;q=850;}else if(k==29){p=620;q=490;}else{p=830;q=600;}var r=window.screenLeft||window.screenX||0,s=window.screenTop||window.screenY||0,t=c('Vector').getViewportDimensions(),u=r+(t.x-p)/2,v=s+115,w='height='+q+',width='+p+',left='+u+',top='+v+',resizable=1,scrollbars=1,toolbar=0,status=0',x='dialogHeight='+q+'px;'+'dialogWidth='+p+'px;'+'dialogLeft='+u+'px;'+'dialogTop='+v+'px;'+'center=1;resizable=1;status=0;';if(this.supportShowModalDialog()){this.apiWindow=window.showModalDialog(o,'api_contact_importer',x);this.isModal=true;}else{this.apiWindow=window.open(o,'api_contact_importer',w);if(this.apiWindow)this.apiWindow.focus();}};j.prototype.supportShowModalDialog=function(){'use strict';return window.showModalDialog&&c('UserAgent_DEPRECATED').firefox();};j.prototype.processToken=function(k,l,m,n){'use strict';var o={api_instance:k,auth_token:l,auth_crypt:Boolean(m)};if(n)o.api_ver=n;this._submitLoginForm(o);};j.prototype.getFormElement=function(){'use strict';return c('ge')(this.getElementID('form'));};j.prototype.getLoginElement=function(){'use strict';return c('ge')(this.getElementID('login_input'));};j.prototype.getContainerElement=function(){'use strict';return c('ge')(this.getElementID('contacts_container'));};j.prototype.getStatusElement=function(){'use strict';return c('ge')(this.getElementID('form'));};j.prototype.logAsync=function(k){'use strict';var l=babelHelpers['extends']({},k,this.getConfigData());new (c('AsyncSignal'))(this.ci_config.log_endpoint,l).send();};j.getDetectedSessionsStr=function(){'use strict';var k='';for(var l in j.detectedSessions)k+=l+":"+j.detectedSessions[l]+"|";return k;};j.getExtSessionUsername=function(k){'use strict';var l=j.detectedSessions[k];return l===undefined?null:l;};j.processExtSessionDetection=function(k,l,m){'use strict';if(!m)return;if(l===null||l==='')l='*';if(j.detectedSessions[k]===undefined||j.detectedSessions[k]==='*')j.detectedSessions[k]=l;};Object.assign(j,{instance:null,detectedSessions:{}});Object.assign(j.prototype,{progress_dialog:null,async:null});f.exports=j;}),null);
__d('CIInputlessController',['CIInputController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('CIInputController'));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this,k,l,m,n,o);return this;}j.prototype.onSubmit=function(k){'use strict';var l=this.getSerializedForm();if(l.use_api_popup&&l.api_instance){c('CIInputController').instance=this;this.openAPIPopup(l.api_instance,'');return false;}return this._submitLoginForm(k);};f.exports=j;}),null);
__d('CIWebmailValidator',['AsyncRequest','URI'],(function a(b,c,d,e,f,g){var h,i=false,j=false,k=[];function l(n){var o=n.tokens;delete n.tokens;for(var p in n){var q=n[p];for(var r in o){if(!Object.prototype.hasOwnProperty.call(o,r))continue;var s=r.replace(/([.?*+\^$\[\]\\(){}\-])/g,"\\$1"),t=new RegExp(s,"g");q=q.replace(t,o[r]);}n[p]=q;}h=n;i=true;while(k.length>0)k.shift()();}var m={flow:null,useCase:null,hasFullMapping:function n(){return i;},init:function n(o,p,q){if(!i&&!j)h=o;this.flow=p;this.useCase=q;},isValidEmail:function n(o){var p=new RegExp("[A-Za-z0-9_!#$%&'*+/=?^`{|}~-]+(?:\\.[A-Za-z0-9_!#$%&'*+/=?^`{|}~-]+)*@(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\\.)+[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?");return p.test(o);},getDomain:function n(o){var p=o.split('@');return p[1];},getDomainImporterName:function n(o){var p=['msft','yahoo','gmail','yahoo_jp','ezweb_jp','mailru','other'],q=o.split(/\./);for(var r=0;r<q.length-1;r++){var s=q.slice(r).join('.');s='|'+s.toLowerCase();for(var t=0;t<p.length;t++){var u=p[t];if(h[u].indexOf(s)!=-1)return u;}}return null;},getImporterName:function n(o){return this.getDomainImporterName(this.getDomain(o));},isLiveDomain:function n(o){return this.getImporterName(o)=='msft';},isGmailDomain:function n(o){return this.getImporterName(o)=='gmail';},isYahooDomain:function n(o){return this.getImporterName(o)=='yahoo';},isYahooJpDomain:function n(o){return this.getImporterName(o)=='yahoo_jp';},isSupportedDomain:function n(o){var p=this.getDomainImporterName(this.getDomain(o));return p!=null;},downloadDomainMapping:function n(o){if(i){if(o)o();return;}if(o)k.push(o);var p=new (c('URI'))('/contact_importer/ajax/get_domains.php').addQueryData({flow:this.flow,use_case:this.useCase});if(!j){j=true;new (c('AsyncRequest'))().setURI(p).setMethod('GET').setReadOnly(true).setHandler(function(q){var r=q.getPayload();l(r);}).send();}},setDomainMapping:function n(o){l(o);}};f.exports=m;b.CIWebmailValidator=m;}),null);
__d('CIWebmailInputController',['Arbiter','CIInputController','CINameToImporterMap','CIWebmailValidator','CSS','DOM','Event','Keys','$','ge'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('CIInputController'));i=h&&h.prototype;function j(k,l,m,n,o,p){'use strict';i.constructor.call(this,k,l,m,n,o);this.enabledApis=p||{};this.login_str=null;this.ms_login=null;this.timer=null;this.importer_widget=this.getWidget();var q=c('CIWebmailValidator').downloadDomainMapping.bind(c('CIWebmailValidator'),null);c('Event').listen(this.importer_widget,'mouseover',q);var r=this.getLoginElement();if(r){c('Event').listen(r,'focus',q);c('Event').listen(r,'change',this.validate.bind(this));c('Event').listen(r,'keydown',this.onKeyDown.bind(this));c('Event').listen(r,'keydown',q);}c('CIInputController').instance=this;return this;}j.prototype.onSubmit=function(k){'use strict';if(c('CIWebmailValidator').isSupportedDomain(this.getLoginString())){this._onSubmit(k);}else c('CIWebmailValidator').downloadDomainMapping(this._onSubmit.bind(this,k));};j.prototype._onSubmit=function(k){'use strict';try{c('CIInputController').instance=this;if(this.deferred)clearTimeout(this.deferred);if(!this.validate())return false;var l=this.getLoginString(),m=this.getAPIInstance(l),n=b.CINUXToDoWebmailInputController&&this instanceof b.CINUXToDoWebmailInputController&&c('CIWebmailValidator').isGmailDomain(l);if(n)m=2;var o=this.getPassword();if(m){this.openAPIPopup(m,l,null);if(o)o.value='';return false;}return i.onSubmit.call(this,{});}catch(q){var p={js_error:q.message};this.logAsync(p);return false;}};j.prototype.validate=function(){'use strict';var k=this.getLoginString();this.login_str=k;if(!k){this.setDefault();this.showEmailMissingError();return false;}this.hideEmailMissingError();var l=c('CIWebmailValidator');if(!l.isValidEmail(k)){this.setDefault();return false;}if(l.isSupportedDomain(k)){var m=this.getAPIInstance(k);if(m){this.setAPI();}else this.setValid();return true;}else{if(c('CIWebmailValidator').hasFullMapping()){this.setUnsupported();}else{this.setWaiting();c('CIWebmailValidator').downloadDomainMapping(this.validate.bind(this));}return false;}};j.prototype.setValid=function(){'use strict';this.enablePassword();c('CSS').setClass(this.importer_widget,'valid');};j.prototype.setWaiting=function(){'use strict';c('CSS').setClass(this.importer_widget,'waiting');};j.prototype.setUnsupported=function(){'use strict';c('CSS').setClass(this.importer_widget,'unsupported');this.disablePassword();this.logAsync({unsupported_login:this.login_str});};j.prototype.setAPI=function(){'use strict';c('CSS').setClass(this.importer_widget,'api');this.disablePassword();};j.prototype.setDefault=function(){'use strict';c('CSS').setClass(this.importer_widget,'default');this.enablePassword();};j.prototype.onKeyDown=function(k){'use strict';if(this.deferred)clearTimeout(this.deferred);var l=c('Event').getKeyCode(k);if(!l||l==c('Keys').RETURN||l==c('Keys').TAB)return;this.deferred=setTimeout(this.updateDisplayOnKeyEvent.bind(this),300);};j.prototype.updateDisplayOnKeyEvent=function(){'use strict';var k=this.getLoginString();if(c('CIWebmailValidator').isValidEmail(k)&&this.getAPIInstance(k)){this.setAPI();return;}if(c('CSS').hasClass(this.importer_widget,'unsupported')){this.setDefault();return;}};j.prototype.canHidePassword=function(){'use strict';return !c('CSS').hasClass(this.importer_widget,'default');};j.prototype.disablePassword=function(){'use strict';if(!this.canHidePassword())return;var k=c('DOM').find(this.getFormElement(),'.ci_password_row');c('CSS').hide(k);c('Arbiter').inform('ContactImporter/passwordRowHidden',{form:this.importer_widget},c('Arbiter').BEHAVIOR_EVENT);};j.prototype.enablePassword=function(){'use strict';var k=c('DOM').find(this.getFormElement(),'.ci_password_row');c('CSS').show(k);c('Arbiter').inform('ContactImporter/passwordRowShown',{form:this.importer_widget},c('Arbiter').BEHAVIOR_EVENT);};j.prototype.getWidget=function(){'use strict';return c('$')(this.getElementID('widget'));};j.prototype.getPassword=function(){'use strict';return c('ge')(this.getElementID('password'));};j.prototype.getAPIInstance=function(k){'use strict';var l=c('CIWebmailValidator').getImporterName(k);if(!l)return null;var m=c('CINameToImporterMap')[l];if(m&&this.enabledApis[m])return m;return null;};j.prototype.getLoginString=function(){'use strict';var k=i.getLoginString.call(this);if(k&&this.shouldImplyDomain())return k+'@'+this.ci_config.domain;return k;};j.prototype.shouldImplyDomain=function(){'use strict';return this.ci_config.domain&&i.getLoginString.call(this).indexOf('@')==-1;};j.prototype.getSerializedForm=function(){'use strict';var k=i.getSerializedForm.call(this);if(this.shouldImplyDomain())k.domain_was_implied=true;return k;};f.exports=j;}),null);
__d('CIWlmInputController',['CIInputController'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('CIInputController'));i=h&&h.prototype;function j(k,l,m,n,o){'use strict';i.constructor.call(this,k,l,m,n,false);Object.assign(this,{api_instance:o});return this;}j.prototype.onSubmit=function(){'use strict';c('CIInputController').instance=this;var k=this.getLoginString();this.openAPIPopup(this.api_instance,k,null);return false;};f.exports=j;}),null);
__d('legacy:ci-modular-importer-js',['CIModularController'],(function a(b,c,d,e,f,g){b.CIModularController=c('CIModularController');}),3);
__d('legacy:contact-importer-input-controller',['CIInputController'],(function a(b,c,d,e,f,g){b.CIInputController=c('CIInputController');}),3);
__d('legacy:contact-importer-inputless-controller',['CIInputlessController'],(function a(b,c,d,e,f,g){b.CIInputlessController=c('CIInputlessController');}),3);
__d('legacy:contact-importer-webmail',['CIWebmailInputController'],(function a(b,c,d,e,f,g){b.CIWebmailInputController=c('CIWebmailInputController');}),3);
__d('legacy:contact-importer-wlm-controller',['CIWlmInputController'],(function a(b,c,d,e,f,g){b.CIWlmInputController=c('CIWlmInputController');}),3);
__d('FastIDVTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:FastIDVLoggerConfig',this.$FastIDVTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:FastIDVLoggerConfig',this.$FastIDVTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$FastIDVTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$FastIDVTypedLogger1=babelHelpers['extends']({},this.$FastIDVTypedLogger1,j);return this;};h.prototype.setContactPoint=function(j){this.$FastIDVTypedLogger1.contact_point=j;return this;};h.prototype.setCurrentTime=function(j){this.$FastIDVTypedLogger1.current_time=j;return this;};h.prototype.setEntryPoint=function(j){this.$FastIDVTypedLogger1.entry_point=j;return this;};h.prototype.setEvent=function(j){this.$FastIDVTypedLogger1.event=j;return this;};h.prototype.setIsFastidv=function(j){this.$FastIDVTypedLogger1.is_fastidv=j;return this;};h.prototype.setStatus=function(j){this.$FastIDVTypedLogger1.status=j;return this;};var i={contact_point:true,current_time:true,entry_point:true,event:true,is_fastidv:true,status:true};f.exports=h;}),null);
__d('OpenIDConnectCookieDialogStore',['WebStorage'],(function a(b,c,d,e,f,g){var h='fastidv_dialog_declined',i={hasDeclinedKey:function j(){var k=c('WebStorage').getLocalStorage();if(!k)return false;return k.getItem(h)==='true';},setDeclinedKey:function j(){var k=c('WebStorage').getLocalStorage();if(!k)return;c('WebStorage').setItemGuarded(k,h,'true');}};f.exports=i;}),null);
__d("XOpenIDConnectFastIDVProcessController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/oauth2\/process\/",{state:{type:"String"},id_token:{type:"String"},error:{type:"String"}});}),null);
__d('OpenIDConnectAuthentication',['cx','fbt','Dialog','PopupWindow','ReloadPage','AsyncRequest','XOpenIDConnectFastIDVProcessController','BanzaiODS','URI','OpenIDConnectCookieDialogStore','DOM','FastIDVTypedLogger'],(function a(b,c,d,e,f,g,h,i){var j='nux_confirmation',k='nux_oauth',l='cliff_confirmation',m='banner_confirmation',n='account_recovery',o={saveAndPassParamsBackToServer:function p(q){var r=o.getProcessTokenURI(q);new (c('AsyncRequest'))().setURI(r).send();},handleFastIDVResponse:function p(q){var r=document.getElementById('email_confirmation_button'),s=document.getElementById('email_confirmation_async_status');if(r){r.disabled=true;CSS.addClass(r,"_42fr");}if(s)CSS.show(s);window.addEventListener('load',setTimeout(function(){if(r&&r.disabled){var t={};t.timeout=true;o.completeAuth(t);}},20000));this.saveAndPassParamsBackToServer(q);},getProcessTokenURI:function p(q){var r=c('XOpenIDConnectFastIDVProcessController').getURIBuilder();if(!q)return r.getURI();var s=new (c('URI'))('https://www.facebook.com?'+q),t=s.getQueryData(),u=t.state,v=t.id_token,w=t.error;if(u)r.setString('state',u);if(v)r.setString('id_token',v);if(w)r.setString('error',w);return r.getURI();},getParams:function p(){var q=window.location.hash;if(q)q=q.substring(1);try{window.opener.OpenIDConnectAuthentication.handleFastIDVResponse(q);}catch(r){}window.close();},startAuth:function p(q){var r=arguments.length<=1||arguments[1]===undefined?'unknown':arguments[1],s=c('PopupWindow').open(q,700,600);new (c('FastIDVTypedLogger'))().setEvent('window_open').setIsFastidv(q.indexOf('id_token')>-1).setContactPoint(new (c('URI'))(q).getQueryData().login_hint).setCurrentTime(Date.now()).setEntryPoint(r).log();c('BanzaiODS').bumpEntityKey('growth','oauth_clicked.'+r);if(!s)c('BanzaiODS').bumpEntityKey('growth','email_confirmation.popup_blocked');},registerStartAuth:function p(q,r){var s=arguments.length<=2||arguments[2]===undefined?'unknown':arguments[2];q.addEventListener('click',function(){o.startAuth(r,s);});},registerStartAuthWithDialog:function p(q,r,s,t){var u=c('OpenIDConnectCookieDialogStore').hasDeclinedKey();if(t&&!u){t.show();c('BanzaiODS').bumpEntityKey('growth','gmail_confirmation_dialog.rendered');}if(q&&r)this.registerStartAuth(q,r,'dialog');if(s&&t)s.addEventListener('click',function(){t.hide();c('OpenIDConnectCookieDialogStore').setDeclinedKey();c('BanzaiODS').bumpEntityKey('growth','gmail_confirmation_dialog.hide');});},completeAuth:function p(q){var r=new (c('FastIDVTypedLogger'))().setEvent('complete').setCurrentTime(Date.now());if('init_email' in q)r.setContactPoint(q.init_email);var s=document.getElementById('email_confirmation_button'),t=document.getElementById('email_confirmation_async_status');if(s){s.disabled=false;CSS.removeClass(s,"_42fr");}if(t)CSS.hide(t);if('timeout' in q){this.handleError(q);r.setStatus('timeout');}else if('reauth_url' in q){this.handleEmailMismatch(q);r.setStatus('email_mismatch');}else if('error' in q){this.handleError(q);r.setStatus('error');}else{this.handleSuccess(q);r.setStatus('success');}r.log();},handleError:function p(q){var r='';if("init_email" in q){r=i._("Se produjo un error en la verificaci\u00f3n del correo electr\u00f3nico {email}. Vuelve a intentarlo.",[i.param('email',q.init_email)]);}else r=i._("Se produjo un error en la verificaci\u00f3n del correo electr\u00f3nico. Vuelve a intentarlo.");new (c('Dialog'))().setModal(true).setTitle(i._("Se produjo un error")).setBody(r).setButtons(c('Dialog').OK).show();},handleSuccess:function p(q){var r=Object.assign({},q);new (c('Dialog'))().setModal(true).setTitle(this.successMessageTitle(r.flow)).setBody(this.successMessageBody(r.flow)).setButtons(c('Dialog').OK).setHandler(function(){switch(r.flow){case l:window.location='/home.php';break;case j:if(window.NUXWizard&&window.NUXWizard.navigation){window.NUXWizard.navigation.goSubmit();}else c('ReloadPage').now();break;case k:if(window.NUXWizard&&window.NUXWizard.navigation){window.NUXWizard.navigation.goSubmit();}else c('ReloadPage').now();break;case m:c('ReloadPage').now();break;case n:window.location=r.redirect_uri;break;}}).show();},handleEmailMismatch:function p(q){var r=i._("\u00bfCambiar correo electr\u00f3nico?"),s=c('DOM').create('b',{},q.auth_email),t=i._("Parece que iniciaste sesi\u00f3n en Gmail con una direcci\u00f3n de correo electr\u00f3nico distinta de la que usaste originalmente. Confirma que quieres usar {auth_email} para iniciar sesi\u00f3n en Facebook.",[i.param('auth_email',s)]);new (c('Dialog'))().setModal(true).setTitle(r).setBody(t).setButtons([{name:'continue_change',label:i._("Cambiar correo electr\u00f3nico"),handler:function u(){o.startAuth(q.reauth_url,'mismatch');}},c('Dialog').CANCEL]).show();},successMessageTitle:function p(q){switch(q){case m:case k:case l:return i._("Cuenta confirmada");case j:return i._("No hay contactos");case n:return i._("Correo electr\u00f3nico verificado");}},successMessageBody:function p(q){switch(q){case m:case k:case l:return i._("Se confirm\u00f3 tu cuenta. Ahora puedes usar todas las funciones de Facebook y conectarte con tus amigos.");case j:return i._("No encontramos ning\u00fan contacto.");case n:return i._("Tu correo electr\u00f3nico se verific\u00f3 correctamente. Ahora puedes restablecer la contrase\u00f1a de tu cuenta.");}}};f.exports=o;b.OpenIDConnectAuthentication=o;}),null);
__d('FriendBrowserNameTypeahead',['Arbiter','CSS'],(function a(b,c,d,e,f,g){function h(i){'use strict';this._typeahead=i;}h.prototype.enable=function(){'use strict';var i=this._typeahead.getCore(),j=i.getValue();this._onResetSubscription=this._typeahead.subscribe('reset',function(){if(j!==i.getValue()){j=i.getValue();c('Arbiter').inform('friend-browser/name-change');}});this._onBlurSubscription=this._typeahead.subscribe('blur',function(){if(!i.selectedText){if(i.getValue()!=='')c('CSS').addClass(this._typeahead.core.inputWrap,'selected');if(j!==i.getValue()){j=i.getValue();c('Arbiter').inform('friend-browser/name-change');}}}.bind(this));};h.prototype.disable=function(){'use strict';this._onBlurSubscription.unsubscribe();this._onResetSubscription.unsubscribe();};f.exports=h;}),null);
__d('WebFriendingRequests',['Arbiter','DOM','Event','FriendRequestIHEventLogger','MarauderLogger','PymkFunnelLogger','Vector','debounceCore'],(function a(b,c,d,e,f,g){var h={init:function i(j,k){this._pymkBox=j;this._lastPymkSeen=-1;this._recordPYMKImpression();c('Event').listen(window,'scroll',c('debounceCore')(this._recordPYMKImpression.bind(this),100));c('Event').listen(window,'resize',c('debounceCore')(this._recordPYMKImpression.bind(this),100));c('Arbiter').subscribe('pymk-x-out',this._handleXout.bind(this));this._requestsBox=k;if(!this._requestsBox)return;this._lastRequestSeen=-1;this._recordFriendRequestImpression();c('Event').listen(window,'scroll',c('debounceCore')(this._recordFriendRequestImpression.bind(this),100));c('Event').listen(window,'resize',c('debounceCore')(this._recordFriendRequestImpression.bind(this),100));},_recordPYMKImpression:function i(){var j=c('DOM').scry(this._pymkBox,'li.friendBrowserListUnit'),k=c('Vector').getViewportDimensions().y,l=j.length-1;while(l>this._lastPymkSeen){var m=c('Vector').getElementPosition(j[l],'viewport').y;if(m>0&&m+c('Vector').getElementDimensions(j[l]).y<=k)break;l-=1;}var n=l;while(l>this._lastPymkSeen){var o=c('DOM').find(j[l],'input.friendBrowserID'),p=parseInt(o.value,10),q=parseInt(j[l].getAttribute('data-signature'),10);c('PymkFunnelLogger').logImpression(p,q,'friends_center');l-=1;}this._lastPymkSeen=Math.max(this._lastPymkSeen,n);},_recordFriendRequestImpression:function i(){var j=c('DOM').scry(this._requestsBox,'div.friendRequestItem'),k=c('Vector').getViewportDimensions().y,l=j.length-1;while(l>this._lastRequestSeen){var m=c('Vector').getElementPosition(j[l],'viewport').y;if(m>0&&m+c('Vector').getElementDimensions(j[l]).y<=k)break;l-=1;}var n=l;while(l>this._lastRequestSeen){var o=j[l].getAttribute('data-id'),p={request_id:o,request_location:'friend_center_requests'};c('MarauderLogger').log('request_seen','friend_request_waterfall',p);c('FriendRequestIHEventLogger').logImpression(o);l-=1;}this._lastRequestSeen=Math.max(this._lastRequestSeen,n);},_handleXout:function i(){this._lastPymkSeen=Math.max(this._lastPymkSeen-1,-1);this._recordPYMKImpression();}};f.exports=h;}),null);
__d('EchoDataSource',['ArbiterMixin','emptyFunction','SearchableEntry','mixin'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(){'use strict';i.constructor.call(this);}j.prototype.query=function(k,l,m,n){'use strict';var o=k?[{uid:k,text:k}]:[];this.inform('respond',{value:k,results:o,isAsync:false});};j.prototype.search=function(k,l){'use strict';if(!k)return;var m=new (c('SearchableEntry'))({uniqueID:k?k:'null',title:k});l([m],k);};Object.assign(j.prototype,{events:['respond'],bootstrap:c('emptyFunction'),init:c('emptyFunction')});f.exports=j;}),null);